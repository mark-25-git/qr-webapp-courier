<!DOCTYPE html>
<html>
  <head>
    <base target="_top" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recipient Info QR Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-white shadow-xl rounded-2xl p-6 space-y-6 sm:p-8">
      <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-800">Recipient Info QR Generator</h1>

      <div class="space-y-4">
        <input id="name" type="text" placeholder="Recipient Name"
          class="w-full px-4 py-3 border rounded-xl text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />

        <input id="contact" type="text" placeholder="Recipient Contact e.g. 0123456789"
          class="w-full px-4 py-3 border rounded-xl text-base sm:text-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />

        <textarea id="address" rows="3" placeholder="Recipient Address"
          class="w-full px-4 py-3 border rounded-xl text-base sm:text-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
      </div>

      <div class="flex space-x-3">
        <button onclick="handleGenerateClick()"
          class="flex-1 bg-blue-600 text-white text-base sm:text-lg font-medium py-3 rounded-xl hover:bg-blue-700 transition">
          Generate
        </button>
        <button onclick="handleReset()"
          class="flex-1 bg-gray-300 text-gray-800 text-base sm:text-lg font-medium py-3 rounded-xl hover:bg-gray-400 transition">
          Reset
        </button>
      </div>

      <!-- Loading Spinner -->
      <div id="loading" class="flex justify-center items-center mt-4 hidden">
        <svg class="animate-spin h-6 w-6 text-blue-600 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
            stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor"
            d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
        </svg>
        <span class="text-blue-600 font-medium">Generating QR Code...</span>
      </div>

      <div id="qrcode" class="flex justify-center mt-4"></div>
    </div>

    <script>
      function handleGenerateClick() {
        const name = document.getElementById("name").value.trim();
        const contact = document.getElementById("contact").value.trim();
        const address = document.getElementById("address").value.trim();
        const message = `${name}\n${contact}\n${address}`;

        const qrContainer = document.getElementById("qrcode");
        const loading = document.getElementById("loading");

        qrContainer.innerHTML = "";

        if (!name && !contact && !address) {
          alert("Please fill in at least one field.");
          return;
        }

        loading.classList.remove("hidden");

        setTimeout(() => {
          loading.classList.add("hidden");

          new QRCode(qrContainer, {
            text: message,
            width: 200,
            height: 200,
            colorDark: "#000000",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
          });

          qrContainer.scrollIntoView({ behavior: "smooth" });
        }, 3000);
      }

      function handleReset() {
        document.getElementById("name").value = "";
        document.getElementById("contact").value = "";
        document.getElementById("address").value = "";
        document.getElementById("qrcode").innerHTML = "";
        document.getElementById("loading").classList.add("hidden");
      }
    </script>
  </body>
</html>
